# Cursor Rules - Clip (nw2025)

> **Project:** Clip (iOS companion app for Meta Ray-Ban glasses)  
> **Platform:** iOS 26+ (SwiftUI + Liquid Glass)  
> **UI Direction:** Warm minimal, timeline-first

Development progress lives in [`frontend/PROGRESS.md`](frontend/PROGRESS.md).

---

## Mandatory Workflow

### Before Starting
```bash
cd /Users/jaypark/Documents/GitHub/nw2025 && git pull origin main
git log --oneline -10
```

### After Every Code Change
Build and deploy so the user can test.

**Simulator:**
```bash
cd /Users/jaypark/Documents/GitHub/nw2025/frontend && \
xcodebuild -project nw2025.xcodeproj -scheme nw2025 \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  -configuration Debug build
```

**iPhone (device connected):**
```bash
cd /Users/jaypark/Documents/GitHub/nw2025/frontend && \
xcodebuild -project nw2025.xcodeproj -scheme nw2025 \
  -destination 'id=00008140-001534E83647001C' \
  -configuration Debug -allowProvisioningUpdates build

xcrun devicectl device install app --device 00008140-001534E83647001C \
  ~/Library/Developer/Xcode/DerivedData/nw2025-*/Build/Products/Debug-iphoneos/nw2025.app

xcrun devicectl device process launch --device 00008140-001534E83647001C me.park.jay.nw2025
```

### After Big Features
Commit only after user confirms it works.
```bash
git add -A
git commit -m "<type>: <summary>"
git push origin main
```

Commit types: `Feat`, `Fix`, `UI`, `Refactor`, `Chore`.

---

## Design Rules (Liquid Glass)

Use Apple Liquid Glass (`.glassEffect()`) for chrome and controls, not content.

**Use glass for:**
- Floating toolbars, pills, buttons, overlays
- Interactive elements (`.glassEffect(.regular.interactive())`)

**Avoid glass for:**
- Primary content blocks (transcripts, timeline cards)

Refer to Apple docs:  
`/Applications/Xcode.app/Contents/PlugIns/IDEIntelligenceChat.framework/Versions/A/Resources/AdditionalDocumentation/`

---

## Product Structure

```
ClipApp/
├── App/                 // ClipApp.swift, GlobalViewState.swift
├── Core/                // Managers, Navigation, DesignSystem
├── Features/Feed/       // TimelineView, MomentCard, ClipDetailView
├── Models/              // ClipMetadata, SearchResult
└── Services/            // APIService, MockData
```

---

## Wake Word (Clip That)

Location: `Core/Managers/WakeWordDetector.swift`

Usage:
```swift
wakeWordDetector.startListening(audioFormat: format)
wakeWordDetector.processAudioBuffer(buffer)
wakeWordDetector.onClipTriggered = { transcript in ... }
```

---

## Testing Strategy

Use simulator for UI work. Use device for:
- Meta glasses integration
- Haptics
- Wake word mic testing

---

## Meta Wearables SDK

SPM URL: `https://github.com/facebook/meta-wearables-dat-ios`  
Docs: `https://wearables.developer.meta.com/docs/develop`

