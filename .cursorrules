# Cursor Rules - Clip (nw2025)

> **Project:** Clip (iOS companion app for Meta Ray-Ban glasses)  
> **Platform:** iOS 26+ (SwiftUI + Liquid Glass)  
> **UI Direction:** Warm minimal, timeline-first

Development progress lives in [`frontend/PROGRESS.md`](frontend/PROGRESS.md).

---

## Non-Negotiable Workflow

### 1) Pull first, always
```bash
cd /Users/jaypark/Documents/GitHub/nw2025 && git pull origin main
git log --oneline -10
```
After pulling, **explicitly say**: "Pulled latest and on `main`."

### 2) Build + run after any code change

**Simulator (default):**
```bash
cd /Users/jaypark/Documents/GitHub/nw2025/frontend && \
xcodebuild -project nw2025.xcodeproj -scheme nw2025 \
  -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
  -configuration Debug build && \
xcrun simctl boot "iPhone 17 Pro" || true && \
xcrun simctl install "iPhone 17 Pro" ~/Library/Developer/Xcode/DerivedData/nw2025-*/Build/Products/Debug-iphonesimulator/nw2025.app && \
xcrun simctl launch "iPhone 17 Pro" me.park.jay.nw2025
```

**Device (when connected):**
```bash
cd /Users/jaypark/Documents/GitHub/nw2025/frontend && \
xcodebuild -project nw2025.xcodeproj -scheme nw2025 \
  -destination 'id=00008140-001534E83647001C' \
  -configuration Debug -allowProvisioningUpdates build && \
xcrun devicectl device install app --device 00008140-001534E83647001C \
  ~/Library/Developer/Xcode/DerivedData/nw2025-*/Build/Products/Debug-iphoneos/nw2025.app && \
xcrun devicectl device process launch --device 00008140-001534E83647001C me.park.jay.nw2025
```

If build/run fails, **stop and report the error**.

### 3) Commit/push only after user confirms it works
```bash
git add -A
git commit -m "<type>: <summary>"
git push origin main
```

Commit types: `Feat`, `Fix`, `UI`, `Refactor`, `Chore`.

After pushing, **explicitly say**: branch + commit hash + summary.

---

## Design Rules (Liquid Glass)

- Use `.glassEffect()` for chrome and controls.
- Use `.glassEffect(.regular.interactive())` for tappable elements.
- Avoid glass on primary content blocks (transcripts, timeline cards).

Docs:  
`/Applications/Xcode.app/Contents/PlugIns/IDEIntelligenceChat.framework/Versions/A/Resources/AdditionalDocumentation/`

---

## Product Structure (Reference)

```
ClipApp/
├── App/                 // ClipApp.swift, GlobalViewState.swift
├── Core/                // Managers, Navigation, DesignSystem
├── Features/Feed/       // TimelineView, MomentCard, ClipDetailView
├── Models/              // ClipMetadata, SearchResult
└── Services/            // APIService, MockData
```

---

## Wake Word (Clip That)

Location: `Core/Managers/WakeWordDetector.swift`

```swift
wakeWordDetector.startListening(audioFormat: format)
wakeWordDetector.processAudioBuffer(buffer)
wakeWordDetector.onClipTriggered = { transcript in ... }
```

---

## Meta Wearables SDK

SPM URL: `https://github.com/facebook/meta-wearables-dat-ios`  
Docs: `https://wearables.developer.meta.com/docs/develop`

